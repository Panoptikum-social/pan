<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Panoptikum Podcasting Social Network">
    <meta name="author" content="Stefan Haslinger">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#d57a5b">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <%= csrf_meta_tag() %>
    <%= live_title_tag assigns[:page_title] || "Pan", suffix: " Â· Panoptikum" %>
    <link phx-track-static rel="stylesheet" href="<%= static_path(@conn, "/css/app.css") %>"/>
    <script defer phx-track-static
      type="text/javascript"
      src="<%= static_path(@conn, "/js/app.js") %>">
    </script>

    <link rel="search"
      type="application/opensearchdescription+xml"
      title="Panoptikum"
      href="https://panoptikum.io/opensearch.xml">

    <script>window.userToken = "<%= assigns[:user_token] %>";
            window.currentUserID = "<%= if @current_user, do: @current_user.id %>"</script>
    <%= render_existing @view_module, "scripts.html", assigns %>
  </head>

  <body class="flex flex-col lg:flex-row lg:h-full text-gray-lighter bg-nav-background scrollbar-gray"
        data-js-view-name="<%= js_view_name(@conn, @view_template) %>" >
    <nav x-data="{ navbarOpen: (Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0) >= 1024) }"
        class="h-full flex flex-col p-4 justify-start lg:overflow-y-auto"
        :class="{'lg:p-1': !navbarOpen}">
      <%= render "_navbar.html", conn: @conn, current_user: @current_user %>
    </nav>

    <div class="flex-1 min-h-full flex flex-col overflow-x-auto">
      <div class="bg-gray-lightest flex-1 text-black">
        <%= @inner_content %>
      </div>

      <footer class="p-4 flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-12
                    justify-evenly place-self-center">
        <%= render "_footer.html", conn: @conn, current_user: @current_user %>
      </footer>
      <div class="flex justify-center w-full font-medium pb-4">
        <p>Hosted by
          <a class="text-link hover:text-link-dark"
            href="https://www.informatom.com">
            Informatom EDV-Dienstleistungen e.U.
          </a>
        </p>
      </div>
    </div>
  </body>
</html>
